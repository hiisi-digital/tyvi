{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "schemas/inventory.schema.json",
  "title": "Inventory Configuration",
  "description": "Inventory configuration file (inventory.toml). Defines repositories within a namespace.",
  "type": "object",
  "required": ["repos"],
  "properties": {
    "meta": {
      "$ref": "#/definitions/InventoryMeta"
    },
    "repos": {
      "type": "array",
      "description": "Repository definitions.",
      "items": {
        "$ref": "#/definitions/RepoDefinition"
      }
    }
  },
  "definitions": {
    "InventoryMeta": {
      "type": "object",
      "description": "Inventory metadata and defaults.",
      "properties": {
        "description": {
          "type": "string",
          "description": "Inventory description."
        },
        "last_updated": {
          "type": "string",
          "description": "ISO date of last update."
        },
        "defaults": {
          "$ref": "#/definitions/InventoryDefaults"
        }
      }
    },
    "InventoryDefaults": {
      "type": "object",
      "description": "Default values applied to repos in this inventory.",
      "properties": {
        "language": {
          "type": "string",
          "description": "Default language."
        },
        "runtime": {
          "type": "string",
          "description": "Default runtime."
        },
        "keep_in_sync": {
          "type": "boolean",
          "description": "Whether to keep repos synced by default."
        },
        "status": {
          "type": "string",
          "description": "Default repo status.",
          "enum": ["active", "stable", "wip", "archived", "needs-review"]
        }
      }
    },
    "RepoDefinition": {
      "type": "object",
      "description": "Repository definition.",
      "required": ["name", "remotes"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Repository name."
        },
        "description": {
          "type": "string",
          "description": "Repository description."
        },
        "remotes": {
          "type": "array",
          "description": "Git remotes.",
          "items": {
            "$ref": "#/definitions/RemoteDefinition"
          },
          "minItems": 1
        },
        "local_path": {
          "description": "Local path within namespace, or false to skip cloning.",
          "oneOf": [
            { "type": "string" },
            { "type": "boolean", "enum": [false] }
          ]
        },
        "category": {
          "type": "string",
          "description": "Category (e.g., \"app\", \"lib\", \"tool\")."
        },
        "status": {
          "type": "string",
          "description": "Development status.",
          "enum": ["active", "stable", "wip", "archived", "needs-review"]
        },
        "language": {
          "type": "string",
          "description": "Primary language."
        },
        "publish_targets": {
          "type": "array",
          "description": "Publish targets (e.g., [\"jsr\", \"npm\"]).",
          "items": {
            "type": "string"
          }
        },
        "dependencies": {
          "type": "array",
          "description": "Dependencies on other repos.",
          "items": {
            "type": "string"
          }
        },
        "keep_in_sync": {
          "type": "boolean",
          "description": "Whether to keep this repo synced."
        },
        "allow_agents": {
          "type": "boolean",
          "description": "Whether AI agents can modify this repo."
        },
        "notes": {
          "type": "string",
          "description": "Additional notes."
        }
      }
    },
    "RemoteDefinition": {
      "type": "object",
      "description": "Git remote definition.",
      "required": ["name", "url"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Remote name (e.g., \"origin\")."
        },
        "url": {
          "type": "string",
          "description": "Remote URL."
        },
        "host": {
          "type": "string",
          "description": "Host name (e.g., \"github.com\")."
        }
      }
    }
  }
}
